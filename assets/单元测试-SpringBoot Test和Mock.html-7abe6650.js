import{_ as e,M as o,p as i,q as c,R as n,t as s,N as t,a1 as p}from"./framework-449724a9.js";const l="/assets/421a1f0b0d77407093e84356d205ae11-34e4184b.png",u={},d=n("h1",{id:"å•å…ƒæµ‹è¯•-springboot-testå’Œmock",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#å•å…ƒæµ‹è¯•-springboot-testå’Œmock","aria-hidden":"true"},"#"),s(" å•å…ƒæµ‹è¯•-SpringBoot Testå’ŒMock")],-1),r=n("p",null,"create by nohi 20230110",-1),k={href:"https://www.bilibili.com/video/BV1DD4y1j7xb/?spm_id_from=333.337.search-card.all.click&vd_source=9004ce053a52d5930f71e230579961e7",target:"_blank",rel:"noopener noreferrer"},v={href:"https://blog.csdn.net/sinat_41900036/article/details/128551507?csdn_share_tail=%7B%22type%22%3A%22blog%22%2C%22rType%22%3A%22article%22%2C%22rId%22%3A%22128551507%22%2C%22source%22%3A%22sinat_41900036%22%7D",target:"_blank",rel:"noopener noreferrer"},m=p(`<h2 id="æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#æ¦‚å¿µ" aria-hidden="true">#</a> æ¦‚å¿µ</h2><h3 id="ä»€ä¹ˆæ˜¯å•å…ƒæµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯å•å…ƒæµ‹è¯•" aria-hidden="true">#</a> ä»€ä¹ˆæ˜¯å•å…ƒæµ‹è¯•</h3><ul><li>ä»€ä¹ˆæ˜¯å•å…ƒï¼Ÿ</li><li>å¯ç‹¬ç«‹æ‰§è¡Œ</li><li>é€Ÿåº¦è¾ƒå¿«</li></ul><h2 id="å•å…ƒæµ‹è¯•ä¸springboot" tabindex="-1"><a class="header-anchor" href="#å•å…ƒæµ‹è¯•ä¸springboot" aria-hidden="true">#</a> å•å…ƒæµ‹è¯•ä¸SpringBoot</h2><h3 id="ä¾èµ–" tabindex="-1"><a class="header-anchor" href="#ä¾èµ–" aria-hidden="true">#</a> ä¾èµ–</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>junit â€“ æ ‡å‡†çš„å•å…ƒæµ‹è¯•Javaåº”ç”¨ç¨‹åº</li><li>Spring Test &amp; Spring Boot Test â€“ å¯¹Spring Bootåº”ç”¨ç¨‹åºçš„å•å…ƒæµ‹è¯•æä¾›æ”¯æŒ</li><li>Mockito, Java mockingæ¡†æ¶ï¼Œç”¨äºæ¨¡æ‹Ÿä»»ä½•Springç®¡ç†çš„Beanï¼Œæ¯”å¦‚åœ¨å•å…ƒæµ‹è¯•ä¸­æ¨¡æ‹Ÿä¸€ä¸ªç¬¬ä¸‰æ–¹ç³»ç»ŸServiceæ¥å£è¿”å›çš„æ•°æ®ï¼Œè€Œä¸ä¼šå»çœŸæ­£è°ƒç”¨ç¬¬ä¸‰æ–¹ç³»ç»Ÿï¼›</li><li>AssertJï¼Œä¸€ä¸ªæµç•…çš„assertionåº“ï¼ŒåŒæ—¶ä¹Ÿæä¾›äº†æ›´å¤šçš„æœŸæœ›å€¼ä¸æµ‹è¯•è¿”å›å€¼çš„æ¯”è¾ƒæ–¹å¼ï¼›</li><li>JSONassertï¼Œå¯¹JSONå¯¹è±¡æˆ–è€…JSONå­—ç¬¦ä¸²æ–­è¨€çš„åº“ã€‚</li></ul><h3 id="spring-bootå•å…ƒæµ‹è¯•ç»“æ„" tabindex="-1"><a class="header-anchor" href="#spring-bootå•å…ƒæµ‹è¯•ç»“æ„" aria-hidden="true">#</a> Spring Bootå•å…ƒæµ‹è¯•ç»“æ„</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>@DisplayName(&quot;AlarmMsgstationControlleræµ‹è¯•ç±»&quot;)  //èµ·åˆ«å
@SpringBootTest
@AutoConfigureMockMvc
@Transactional
@TestMethodOrder(MethodOrderer.OrderAnnotation.class)
public class Test {
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æ³¨è§£" tabindex="-1"><a class="header-anchor" href="#æ³¨è§£" aria-hidden="true">#</a> æ³¨è§£</h2><p><img src="`+l+`" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="ç”¨æ³•" tabindex="-1"><a class="header-anchor" href="#ç”¨æ³•" aria-hidden="true">#</a> ç”¨æ³•</h2><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>// junit5 ä¹‹å‰é‡‡ç”¨ @RunWith(SpringRunner.class) æ–¹å¼
@ExtendWith(SpringExtension.class)
@SpringBootTest
public class FirstTest {
    @Test
    public void test() {
        int a=1;
        Assertions.assertEquals(1,a);//åˆ¤æ–­äºŒè€…æ˜¯å¦ç›¸ç­‰
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="mock" tabindex="-1"><a class="header-anchor" href="#mock" aria-hidden="true">#</a> Mock</h3><ol><li>å¯ä»¥å®Œå…¨è„±ç¦»æ•°æ®åº“</li><li>åªé’ˆå¯¹æŸä¸€ä¸ªå°æ–¹æ³•ï¼ˆä¸€ä¸ªå°çš„å•å…ƒï¼‰æ¥æµ‹è¯•ï¼Œæµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œä¸éœ€è¦å¯åŠ¨å…¶ä»–çš„ä¸œè¥¿ï¼Œä¸å…å…¶ä»–å› ç´ å¯èƒ½äº§ç”Ÿçš„å¹²æ‰°</li></ol><ul><li><p>ä¸å†ä½¿ç”¨@Autowired</p></li><li><p>å¯åŠ¨Springä¼šå¯¼è‡´è¿è¡Œå•å…ƒæµ‹è¯•çš„æ—¶å€™çš„é€Ÿåº¦å˜æ…¢ï¼ˆrun-&gt;Junit Testï¼‰ï¼Œå•å…ƒæµ‹è¯•åªé’ˆå¯¹æŸä¸€ä¸ªç±»çš„æ–¹æ³•æ¥æµ‹è¯•ï¼Œä¸éœ€è¦å¯åŠ¨Springï¼Œåªéœ€è¦å¯¹åº”çš„å®ä½“å®ä¾‹å°±å¤Ÿäº†ï¼Œåœ¨éœ€è¦æ³¨å…¥beançš„æ—¶å€™ç›´æ¥new</p></li><li><p>ä¸å†ä½¿ç”¨@SpringBootTest</p></li><li><p>ä¸è°ƒç”¨æ•°æ®åº“</p></li><li><p>@Transactional @Rollback(true)è¿™ä¸¤ä¸ªæ³¨è§£ä¹Ÿä¸è¦</p></li><li><p>ä½¿ç”¨Assertæ–­è¨€</p></li></ul><h4 id="åŸºæœ¬åº”ç”¨" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬åº”ç”¨" aria-hidden="true">#</a> <strong>åŸºæœ¬åº”ç”¨</strong></h4><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>public class MockitoDemo {
    @Test
    public void test() {
        Random mockRandom = mock(Random.class); //mockäº†ä¸€ä¸ªRandomå¯¹è±¡
        Assertions.assertEquals(0, mockRandom.nextInt());//æœªè¿›è¡Œæ‰“æ¡©ï¼Œæ¯æ¬¡è¿”å›å€¼éƒ½æ˜¯0

        when(mockRandom.nextInt()).thenReturn(100);  // è¿›è¡Œæ‰“æ¡©æ“ä½œï¼ŒæŒ‡å®šè°ƒç”¨ nextInt æ–¹æ³•æ—¶ï¼Œæ°¸è¿œè¿”å› 100
        Assertions.assertEquals(100, mockRandom.nextInt());
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>å¼‚å¸¸ï¼šMockito cannot mock this class: class java.util.Random</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>jvmå‚æ•°æ·»åŠ ï¼š --add-exports=java.base/jdk.internal.util.random=ALL-UNNAMED
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul><h4 id="mock-1" tabindex="-1"><a class="header-anchor" href="#mock-1" aria-hidden="true">#</a> @Mock</h4><p>@Mock æ³¨è§£å¯ä»¥ç†è§£ä¸ºå¯¹ mock æ–¹æ³•çš„ä¸€ä¸ªæ›¿ä»£ã€‚ä½¿ç”¨è¯¥æ³¨è§£æ—¶ï¼Œè¦ä½¿ç”¨<code>MockitoAnnotations.initMocks</code> æ–¹æ³•ï¼Œè®©æ³¨è§£ç”Ÿæ•ˆã€‚æ—§ç‰ˆçš„æ˜¯initMocksï¼Œæ–°ç‰ˆçš„æ˜¯openMocks</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>	  <span class="token annotation punctuation">@Mock</span>
    <span class="token keyword">private</span> <span class="token class-name">Random</span> random<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@BeforeEach</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;===BeforeEach===&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è®©æ³¨è§£ç”Ÿæ•ˆ</span>
        <span class="token class-name">MockitoAnnotations</span><span class="token punctuation">.</span><span class="token function">initMocks</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">when</span><span class="token punctuation">(</span>random<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenReturn</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> random<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¹Ÿå¯ä»¥ç”¨<code>MockitoJUnitRunner</code>æ¥ä»£æ›¿<code>MockitoAnnotations.initMocks</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// junit5 mockito</span>
<span class="token annotation punctuation">@ExtendWith</span><span class="token punctuation">(</span><span class="token class-name">MockitoExtension</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Mockito2Demo</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Mock</span>
    <span class="token keyword">private</span> <span class="token class-name">Random</span> random<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@BeforeEach</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;===BeforeEach===&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * å¢åŠ jvmå‚æ•°ï¼š--add-exports=java.base/jdk.internal.util.random=ALL-UNNAMED
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">when</span><span class="token punctuation">(</span>random<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenReturn</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> random<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="spy" tabindex="-1"><a class="header-anchor" href="#spy" aria-hidden="true">#</a> @Spy</h4><blockquote><p>mock()æ–¹æ³•ä¸spy()æ–¹æ³•çš„ä¸åŒï¼š</p><ol><li>è¢«spyçš„å¯¹è±¡ä¼šèµ°çœŸå®çš„æ–¹æ³•ï¼Œè€Œmockå¯¹è±¡ä¸ä¼š</li><li>spyæ–¹æ³•çš„å‚æ•°æ˜¯å¯¹è±¡å®ä¾‹ï¼Œmockçš„å‚æ•°æ˜¯class</li></ol></blockquote><p>@InjectMocks mockito ä¼šå°† @Mockã€@Spy ä¿®é¥°çš„å¯¹è±¡è‡ªåŠ¨æ³¨å…¥åˆ° @InjectMocks ä¿®é¥°çš„å¯¹è±¡ä¸­</p><h5 id="thenreturn" tabindex="-1"><a class="header-anchor" href="#thenreturn" aria-hidden="true">#</a> thenReturn</h5><p>thenReturn ç”¨æ¥æŒ‡å®šç‰¹å®šå‡½æ•°å’Œå‚æ•°è°ƒç”¨çš„è¿”å›å€¼ï¼›</p><p>thenReturn ä¸­å¯ä»¥æŒ‡å®šå¤šä¸ªè¿”å›å€¼ã€‚åœ¨è°ƒç”¨æ—¶è¿”å›å€¼ä¾æ¬¡å‡ºç°ã€‚è‹¥è°ƒç”¨æ¬¡æ•°è¶…è¿‡è¿”å›å€¼çš„æ•°é‡ï¼Œå†æ¬¡è°ƒç”¨æ—¶è¿”å›æœ€åä¸€ä¸ªè¿”å›å€¼ã€‚</p><p>doReturn çš„ä½œç”¨å’Œ thenReturn ç›¸åŒï¼Œä½†ä½¿ç”¨æ–¹å¼ä¸åŒï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>when(mockRandom.nextInt()).thenReturn(1);//è¿”å›å€¼ä¸º1
when(mockRandom.nextInt()).thenReturn(1, 2, 3);

doReturn(1).when(random).nextInt();
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="thenthrow" tabindex="-1"><a class="header-anchor" href="#thenthrow" aria-hidden="true">#</a> thenThrow</h5><p>thenThrow ç”¨æ¥è®©å‡½æ•°è°ƒç”¨æŠ›å‡ºå¼‚å¸¸ã€‚ï¼ˆå¯æ­é…try catchä½¿ç”¨ï¼‰</p><p>thenThrow ä¸­å¯ä»¥æŒ‡å®šå¤šä¸ªå¼‚å¸¸ã€‚åœ¨è°ƒç”¨æ—¶å¼‚å¸¸ä¾æ¬¡å‡ºç°ã€‚è‹¥è°ƒç”¨æ¬¡æ•°è¶…è¿‡å¼‚å¸¸çš„æ•°é‡ï¼Œå†æ¬¡è°ƒç”¨æ—¶æŠ›å‡ºæœ€åä¸€ä¸ªå¼‚å¸¸ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token function">when</span><span class="token punctuation">(</span>mockRandom<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenThrow</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;å¼‚å¸¸&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">when</span><span class="token punctuation">(</span>mockRandom<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenThrow</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;å¼‚å¸¸1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;å¼‚å¸¸2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">Random</span> mockRandom <span class="token operator">=</span> <span class="token function">mock</span><span class="token punctuation">(</span><span class="token class-name">Random</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">when</span><span class="token punctuation">(</span>mockRandom<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenThrow</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;å¼‚å¸¸1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;å¼‚å¸¸2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    mockRandom<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ä¸Šä¸€è¡Œä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œåˆ°catchä¸­å»ï¼Œèµ°ä¸åˆ°è¿™é‡Œ</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;===exï¼š&quot;</span> <span class="token operator">+</span> ex<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertTrue</span><span class="token punctuation">(</span>ex <span class="token keyword">instanceof</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">&quot;å¼‚å¸¸1&quot;</span><span class="token punctuation">,</span> ex<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    mockRandom<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertTrue</span><span class="token punctuation">(</span>ex <span class="token keyword">instanceof</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">&quot;å¼‚å¸¸2&quot;</span><span class="token punctuation">,</span> ex<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="dothrow" tabindex="-1"><a class="header-anchor" href="#dothrow" aria-hidden="true">#</a> doThrow</h5><p>å¯¹åº”è¿”å›ç±»å‹æ˜¯ void çš„å‡½æ•°ï¼ŒthenThrow æ˜¯æ— æ•ˆçš„ï¼Œè¦ä½¿ç”¨ doThrowã€‚ä¹Ÿå¯ä»¥ç”¨ doThrow è®©è¿”å›évoidçš„å‡½æ•°æŠ›å‡ºå¼‚å¸¸</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>doThrow(new RuntimeException(&quot;å¼‚å¸¸&quot;)).when(exampleService).hello();
// ä¸‹é¢è¿™å¥ç­‰åŒäº when(random.nextInt()).thenThrow(new RuntimeException(&quot;å¼‚å¸¸&quot;));
doThrow(new RuntimeException(&quot;å¼‚å¸¸&quot;)).when(random).nextInt();
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="reset" tabindex="-1"><a class="header-anchor" href="#reset" aria-hidden="true">#</a> reset</h5><p>ä½¿ç”¨ reset æ–¹æ³•ï¼Œå¯ä»¥é‡ç½®ä¹‹å‰è‡ªå®šä¹‰çš„è¿”å›å€¼å’Œå¼‚å¸¸ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>reset(exampleService);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h5 id="vetify" tabindex="-1"><a class="header-anchor" href="#vetify" aria-hidden="true">#</a> vetify</h5><p>ä½¿ç”¨ verify å¯ä»¥æ ¡éªŒ mock å¯¹è±¡æ˜¯å¦å‘ç”Ÿè¿‡æŸäº›æ“ä½œï¼Œé…åˆ time æ–¹æ³•ï¼Œå¯ä»¥æ ¡éªŒæŸäº›æ“ä½œå‘ç”Ÿçš„æ¬¡æ•°</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>//åˆ¤æ–­backOutstockMapper.selectReportCountByMap()æ–¹æ³•æ˜¯å¦è¢«è°ƒç”¨1æ¬¡
verify(backOutstockMapper, times(1)).selectReportCountByMap(Mockito.any());

//æ ¡éªŒbackOutstockMapper.selectReportCountByMap()æ–¹æ³•æ˜¯å¦è¢«è°ƒç”¨è¿‡
verify(backOutstockMapper).selectReportCountByMap(Mockito.any());
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ–­è¨€" tabindex="-1"><a class="header-anchor" href="#æ–­è¨€" aria-hidden="true">#</a> æ–­è¨€</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>-&gt;assertTrue(String message, boolean condition)             è¦æ±‚condition == true
-&gt;assertFalse(String message, boolean condition)            è¦æ±‚condition == false
-&gt;assertEquals(String message, XXX expected,XXX actual) è¦æ±‚expectedæœŸæœ›çš„å€¼èƒ½å¤Ÿç­‰äºactual
-&gt;assertArrayEquals(String message, XXX[] expecteds,XXX [] actuals) è¦æ±‚expected.equalsArray(actual)
-&gt;assertNotNull(String message, Object object)          è¦æ±‚object!=null
-&gt;assertNull(String message, Object object)             è¦æ±‚object==null
-&gt;assertSame(String message, Object expected, Object actual)     è¦æ±‚expected == actual
-&gt;assertNotSame(String message, Object unexpected,Object actual) è¦æ±‚expected != actual
-&gt;assertThat(String reason, T actual, Matcher matcher)  è¦æ±‚matcher.matches(actual) == true
-&gt;fail(String message) è¦æ±‚æ‰§è¡Œçš„ç›®æ ‡ç»“æ„å¿…ç„¶å¤±è´¥ï¼ŒåŒæ ·è¦æ±‚ä»£ç ä¸å¯è¾¾,å³æ˜¯è¿™ä¸ªæ–¹æ³•åœ¨ç¨‹åºè¿è¡Œåä¸ä¼šæˆåŠŸè¿”å›ï¼Œå¦‚æœæˆåŠŸè¿”å›äº†åˆ™æŠ¥é”™
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,47);function b(h,g){const a=o("ExternalLinkIcon");return i(),c("div",null,[d,n("blockquote",null,[r,n("p",null,[s("ğŸ“¹"),n("a",k,[s("å•å…ƒæµ‹è¯•è¯¦è§£-SpringBootTestå’ŒMockæµ‹è¯•"),t(a)]),s(" ğŸ—’ï¸ "),n("a",v,[s("ç¬”è®°"),t(a)])])]),m])}const f=e(u,[["render",b],["__file","å•å…ƒæµ‹è¯•-SpringBoot Testå’ŒMock.html.vue"]]);export{f as default};
